name: Count Graphic Files

on:
  schedule:
    - cron: '0 2 * * 1'  # Ogni lunedÃ¬ alle 02:00 UTC (puoi cambiare l'orario qui)
  workflow_dispatch:  # Permette di avviarlo manualmente

jobs:
  count-graphic-files:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Count graphic files
        run: |
          # Definisce le estensioni dei file grafici
          extensions="\( -name '*.png' -o -name '*.jpg' -o -name '*.jpeg' -o -name '*.gif' -o -name '*.svg' \)"
          
          # Conta i file di grafica nel repository
          total_files=$(find . -type f $extensions | wc -l)

          # Crea la cartella txt se non esiste
          mkdir -p txt

          # Crea il file di testo con il numero di file grafici
          txt_file="txt/Number Picons (${total_files}).txt"
          echo "Number of graphic files: $total_files" > "$txt_file"
          
          echo "File created: $txt_file with $total_files graphic files."

      - name: Commit and push file with graphic count
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "github-actions@github.com"

          git add txt/*.txt
          git commit -m "Added number of graphic files"
          git push || git push --force
